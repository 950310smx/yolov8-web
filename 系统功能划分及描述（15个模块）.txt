系统功能划分及功能描述（软著申请用）
===========================================

一、用户注册与登录认证功能
===========================================
功能描述：
系统提供用户注册与登录认证功能，支持用户名或邮箱两种登录方式。注册时用户需设置用户名、密码和邮箱，系统自动将新用户设置为普通用户角色，并采用密码哈希加密存储确保安全性。登录界面采用响应式布局设计，左侧展示平台功能简介，右侧为登录表单。系统集成会话管理机制，登录成功后建立用户会话并跳转至主界面。支持错误提示与成功反馈，提供注册入口链接，采用现代化UI设计提升用户体验。

===========================================
二、普通图像分析功能
===========================================
功能描述：
普通图像分析功能面向所有登录用户，支持单张图像上传与分析。用户可选择材料类型（粉末或金属），上传PNG、JPG、JPEG、TIF、TIFF、BMP等格式的图像文件。系统使用YOLO深度学习模型对图像进行目标检测与分割，自动识别图像中的颗粒或缺陷，生成带标注的结果图像。系统计算粒径分布数据，将颗粒按粒径大小分为10个区间并统计每个区间的数量，生成粒径分布直方图数据。分析结果自动保存为分析报告，包含原始图像、结果图像、粒径分布统计等信息，用户可在报告中心查看和管理。

===========================================
三、定制化批量分析功能（会员专享）
===========================================
功能描述：
定制化批量分析功能为会员用户提供高级分析能力，支持一次性上传多张图像进行批量处理。系统依次处理每张图像，执行YOLO模型检测、高级参数计算、个性化图像标注等操作。用户可自定义输出图像效果，包括半透明涂色、高亮边缘、标签文字、颜色分配等选项，系统根据用户设置生成个性化标注图像。支持选择需要计算的参数指标，包括长轴短轴比、莱利圆度、边界径向标准差、灰度共生矩阵特征、LBP熵、粉末遮盖率等。每张图像的分析结果独立保存，批量处理完成后统一展示在报告中心，显著提升批量样本分析效率。

===========================================
四、高级参数计算功能（会员专享）
===========================================
功能描述：
高级参数计算功能为会员用户提供六种专业分析参数。长轴短轴比通过拟合椭圆计算颗粒的长轴与短轴比值，反映颗粒的椭圆度或细长程度；莱利圆度计算颗粒形状接近圆形的程度，值范围0-1，1表示完美圆形；边界径向标准差量化颗粒边界的不规则程度，值越大表示边界越不规则；灰度共生矩阵（GLCM）特征包括对比度、能量、同质性三个纹理特征，用于描述颗粒表面的纹理特性；LBP熵通过局部二值模式提取纹理复杂度信息；粉末遮盖率计算颗粒覆盖图像总面积的比例。系统根据用户选择的参数进行计算，生成详细的统计数据用于后续分析和可视化。

===========================================
五、边缘触碰检测与形状分类功能（会员专享）
===========================================
功能描述：
边缘触碰检测功能自动识别位于图像边缘的颗粒，通过检测颗粒边界框是否与图像边界接触来判断。触碰边缘的颗粒可能因图像裁剪导致形状信息不完整，影响分析准确性。系统在输出图像中通过颜色区分（红色标记触碰边缘颗粒，绿色标记未触碰边缘颗粒），并在分析结果中统计触碰边缘颗粒的数量和比例。形状分类功能基于莱利圆度值自动将颗粒分为"圆形"（Round，圆度≥0.7）和"不规则"（Irregular，圆度<0.7）两类，生成形状分布统计，包括圆形颗粒数量、不规则颗粒数量及其占比，为质量评估提供重要参考。

===========================================
六、可视化分析功能（会员专享）
===========================================
功能描述：
可视化分析功能为会员用户提供定制化分析结果的详细图表展示和解释说明。系统生成多种类型的可视化图表：形状分布散点图展示每个颗粒在圆度-长轴短轴比二维空间中的分布，区分圆形和不规则颗粒；边缘触碰对比图对比触碰边缘与未触碰边缘颗粒在多个维度上的差异；圆度分布直方图展示所有颗粒的圆度值分布情况；长轴短轴比分布直方图展示所有颗粒的长轴短轴比分布情况；GLCM特征对比图展示灰度共生矩阵纹理特征的对比。每个图表均配有详细的分析说明，包括指标含义、计算方法、当前分析结果解读及建议，帮助用户深入理解分析数据。

===========================================
七、报告管理与查看功能
===========================================
功能描述：
报告管理功能提供历史分析记录的集中管理和查看。系统以卡片形式展示所有分析报告，每个报告卡片显示缩略图、文件名、材料类型、分析类型（普通分析/定制化分析）、创建时间等信息。支持按材料类型筛选（全部、粉末、金属），用户可快速定位所需报告。报告卡片支持点击查看详情，提供删除功能允许用户清理不需要的报告。系统区分普通分析和定制化分析，通过不同标识帮助用户快速识别。界面采用响应式网格布局，适配不同屏幕尺寸，提供良好的浏览体验。

===========================================
八、报告详情查看功能
===========================================
功能描述：
报告详情查看功能展示单个分析任务的完整信息。页面显示报告基本信息（文件名、材料类型、分析类型、创建时间等）、检测结果图像、粒径分布统计（普通分析）或定制化分析指标（会员分析）。对于定制化分析报告，系统显示所有计算出的参数值，包括粉末遮盖率、平均圆度、平均长轴短轴比、边缘触碰统计、形状分布、GLCM特征、LBP熵、边界径向标准差等。定制化分析报告还提供"可视化分析"按钮，点击后跳转到专门的可视化分析页面查看详细图表。页面支持PDF报告导出功能，生成专业的分析报告文档。

===========================================
九、PDF报告导出功能
===========================================
功能描述：
PDF报告导出功能将分析结果导出为专业的PDF格式报告。报告包含基本信息表格（文件名、材料类型、分析类型、创建时间等）、检测结果图像、分析数据表格和可视化图表。对于定制化分析，报告还包含定制化分析指标表格和多种可视化图表（形状分布饼图、圆度分布直方图、长轴短轴比分布直方图、形状分布散点图、边缘触碰对比图、GLCM特征对比图等）。报告采用专业排版设计，支持中文字体显示，包含检测人员和审核人员签名区域，适用于科研报告、质量检测文档等正式场合。系统使用ReportLab库生成PDF，自动处理图表插入和格式排版。

===========================================
十、个人中心管理功能
===========================================
功能描述：
个人中心管理功能允许用户查看和编辑个人信息。用户可修改真实姓名、职位/职称（质量工程师、检测员、审核员、技术主管、实验室主任等）、联系电话等信息。系统显示用户角色（普通用户、会员、管理员、分析师）和会员申请状态（无申请、待审核、已通过、已拒绝），这些信息由系统管理不可直接修改。提供电子签名功能，用户可在画布上使用鼠标或触摸屏进行签名，签名以图片形式保存，用于报告签署。支持清除和重新签名，签名数据实时保存。普通用户可在个人中心申请成为会员，提交申请后等待管理员审核。

===========================================
十一、会员申请与审批功能
===========================================
功能描述：
会员申请与审批功能实现普通用户向会员身份的转换流程。普通用户可在个人中心提交会员申请，系统将用户会员状态设置为"待审核"。管理员在管理员界面查看所有待审核的会员申请，显示申请用户的详细信息（用户名、邮箱、真实姓名、职位、联系电话、申请时间）。管理员可对申请进行批准或拒绝操作，批准后用户角色自动升级为会员，获得定制化分析等高级功能权限；拒绝后用户保持普通用户身份，可重新申请。系统通过AJAX异步处理审批操作，实时更新申请状态，提供操作确认机制防止误操作。

===========================================
十二、管理员账号管理功能
===========================================
功能描述：
管理员账号管理功能为管理员提供系统用户信息的全面管理。管理员界面以表格形式展示所有注册用户的详细信息，包括用户ID、用户名、邮箱、角色（普通用户、会员、管理员、分析师）、会员状态（无申请、待审核、已通过、已拒绝）、真实姓名、职位、联系电话、注册时间等。系统通过不同颜色的徽章标识用户角色和会员状态，便于快速识别。管理员可查看所有用户的账号信息，了解系统用户构成和会员申请情况，为系统管理和决策提供数据支持。界面采用响应式设计，支持数据表格的横向滚动以适应不同屏幕尺寸。

===========================================
十三、数据统计与可视化功能
===========================================
功能描述：
数据统计与可视化功能在主界面提供用户历史分析任务的数据概览。系统统计用户所有历史分析任务中粉末与金属两种材料类型的数量，使用Chart.js库渲染环形图（Doughnut Chart）实时展示占比分布。图表中心显示总任务数，下方以不同颜色标识粉末与金属的占比百分比。图表支持点击交互，用户点击对应区域可跳转至报告中心并自动筛选对应材料类型的报告。当无历史数据时，系统显示提示信息引导用户完成首次分析任务。该功能帮助用户快速了解自己的分析任务分布情况，提供直观的数据概览。

===========================================
十四、权限控制与角色管理功能
===========================================
功能描述：
权限控制与角色管理功能实现基于角色的访问控制（RBAC）。系统定义四种用户角色：普通用户、会员、管理员、分析师，每种角色拥有不同的功能权限。普通用户可使用基础分析功能；会员用户额外享有定制化分析、批量处理、高级参数计算、可视化分析等高级功能；管理员拥有账号管理、会员审批等管理权限；分析师角色预留用于后续功能扩展。系统通过会话管理机制实现权限控制，在用户访问功能时检查角色权限，非授权用户将被重定向并提示权限不足。导航菜单根据用户角色动态显示，确保用户只能访问有权限的功能模块。

===========================================
十五、颗粒详细信息记录功能（会员专享）
===========================================
功能描述：
颗粒详细信息记录功能为定制化分析中的每个检测到的颗粒保存完整的分析数据。系统记录每个颗粒的边缘触碰状态、圆度值、长轴短轴比、形状分类（圆形/不规则）等详细信息。这些数据以JSON格式存储在数据库中，用于生成可视化图表，支持多维度的数据分析和对比。系统将颗粒详细信息与可视化分析功能结合，能够展示每个颗粒在圆度-长轴短轴比二维空间中的分布，区分不同形状和边缘状态的颗粒，为科研和质量管理提供详细的数据支撑。该功能为后续的数据挖掘和深度分析提供基础数据。

